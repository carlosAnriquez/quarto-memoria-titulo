<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>marco-metodologico – Proyecto memoria de título</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Proyecto memoria de título</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resumen.html"> 
<span class="menu-text">Resumen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./introduccion.html"> 
<span class="menu-text">Introducción</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./antecedentes.html"> 
<span class="menu-text">Antecedentes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./pregunta.html"> 
<span class="menu-text">Pregunta de investigación</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./hipotesis.html"> 
<span class="menu-text">Hipótesis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./marco-metodologico.html" aria-current="page"> 
<span class="menu-text">Metodología</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resultados.html"> 
<span class="menu-text">Resultados</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./conclusiones.html"> 
<span class="menu-text">Conclusiones</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#metodología" id="toc-metodología" class="nav-link active" data-scroll-target="#metodología">5. Metodología</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="metodología" class="level2" style="text-align: justify">
<h2 class="anchored" data-anchor-id="metodología">5. Metodología</h2>
<section id="datos" class="level3">
<h3 class="anchored" data-anchor-id="datos">5.1 Datos</h3>
<p>El instrumento de medición utilizado para esta investigación es el Estudio Longitudinal Social de Chile (ELSOC) del Centro de Estudios de Conflicto y Cohesión Social de Chile (COES). Esta encuesta tiene una estrategia de muestreo probabilística y multietápica, seleccionando los casos por ciudades, bloques, viviendas e individuos, incluyendo en la población del estudio a hombres y mujeres entre 18 a 75 años en zonas urbanas de 40 ciudades del país (Centro de Estudios de Conflicto y Cohesión Social, 2022). El diseño muestral de la encuesta se centra en zonas urbanas, con mayor representación de las tres ciudades más grandes del país, lo que asegura una buena representatividad para un fenómeno urbano como la protesta social. El diseño muestral de la encuesta alcanza una representatividad del 77% de la población total del país, y un 93% de la población urbana. Para mitigar la pérdida de participantes a lo largo del tiempo, el estudio tipo panel emplea dos muestras independientes, una original y otra de refresco. En esta investigación, se utilizará la versión más reciente de la encuesta, cuyos datos fueron levantados entre julio y noviembre de 2022.</p>
<p>Debido a la facilidad de la interpretación y la simplicidad en el manejo de los datos, los casos perdidos de la encuesta fueron tratados siguiendo un criterio de eliminación por lista (listwise), descartando los casos que presentan al menos un dato perdido. De este modo, la muestra efectiva disminuye a 820.</p>
</section>
<section id="variables" class="level3">
<h3 class="anchored" data-anchor-id="variables">5.2 Variables</h3>
<p>Los indicadores señalados en la tabla 1 corresponde a las variables dependientes: justificación de la violencia de Carabineros y justificación de la violencia de manifestantes, y corresponden a la siguiente pregunta: ¿En qué medida cree usted que se justifican o no se justifican las siguientes situaciones?: 1. Que Carabineros use la fuerza para reprimir marchas pacíficas; 2. Que estudiantes tiren piedras a Carabineros. Estos indicadores, centrados en el uso de la fuerza por parte de los actores involucrados en la protesta social, son parte del módulo de conflicto social de la encuesta. Para ambas variables, las categorías de respuestas corresponden a una escala Likert de 1 a 5.</p>
<p><strong>Tabla 1: Variables dependientes</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 47%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Concepto</th>
<th>Indicador</th>
<th>Valores</th>
<th>Frecuencias (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Justificación violencia de Carabineros</td>
<td>Que Carabineros use la fuerza para reprimir una manifestación pacifica</td>
<td><ol type="1">
<li>Nunca</li>
<li>Pocas Veces</li>
<li>Algunas Veces</li>
<li>Muchas Veces</li>
<li>Siempre</li>
</ol></td>
<td><p>1 : 558 (68.0%)</p>
<p>2 : 107 (13.0%)</p>
<p>3 : 100 ( 12.2%)</p>
<p>4 : 35 (4.3%)</p>
<p>5: 20 (2.4%)</p></td>
</tr>
<tr class="even">
<td>Justificación violencia manifestantes</td>
<td>Que estudiantes tiren piedras a Carabineros en una marcha</td>
<td><ol type="1">
<li>Nunca</li>
<li>Pocas Veces</li>
<li>Algunas Veces</li>
<li>Muchas Veces</li>
<li>Siempre</li>
</ol></td>
<td><p>1 : 698 (85.1%)</p>
<p>2 : 72 (8.8%)</p>
<p>3 : 34 (4.1%)</p>
<p>4 : 5 (0.6%)</p>
<p>5 : 11 (1.3%)</p></td>
</tr>
</tbody>
</table>
<p>Fuente: Elaboración propia en base a datos ELSOC 2022 (n= 820).</p>
<p>Para distinguir la orientación política de los individuos, usaremos como indicador la escala de auto ubicación política entre izquierda y derecha. La variable original es una escala del 0 al 12, en donde 0 a 4 corresponde a izquierda, 5 es centro, de 6 a 10 corresponde a derecha, 11 a independiente y 12 a ninguno (apolítico). Esta variable fue recodificada con los valores presentados en la tabla 2.</p>
<p>**Tabla 2: Variables independientes<br>
</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 50%">
<col style="width: 10%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th>Concepto</th>
<th>Indicador</th>
<th>Valores</th>
<th>Frecuencias (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Orientación Política</td>
<td>Autoubicación: izquierda o derecha</td>
<td><ol type="1">
<li>Izquierda</li>
<li>Centro</li>
<li>Derecha</li>
<li>Apolítico</li>
</ol></td>
<td><p>1 : 157 (19.1%)</p>
<p>2 : 263 (32.1%)</p>
<p>3 : 130 (15.9%)</p>
<p>4 : 270 (32.9%)</p></td>
</tr>
<tr class="even">
<td>Miedo a manifestantes violentos</td>
<td>Grado de miedo: Los manifestantes violentos en las protestas</td>
<td><ol type="1">
<li>Nada</li>
<li>Poco</li>
<li>Algo</li>
<li>Bastante</li>
<li>Mucho</li>
</ol></td>
<td><p>1 : 27 (3.3%)</p>
<p>2 : 42 (5.1%)</p>
<p>3 : 116 (14.1%)</p>
<p>4 : 304 (37.2%)</p>
<p>5 : 331 (40.4%)</p></td>
</tr>
<tr class="odd">
<td>Miedo a Carabineros en manifestaciones</td>
<td>Grado de miedo: El accionar de las fuerzas de seguridad en las manifestaciones</td>
<td><ol type="1">
<li>Nada</li>
<li>Poco</li>
<li>Algo</li>
<li>Bastante</li>
<li>Mucho</li>
</ol></td>
<td><p>1 : 101 (12.3%)</p>
<p>2 : 91 (11.1%)</p>
<p>3 : 198 (24.1%)</p>
<p>4 : 252 (30.7%)</p>
<p>5 : 178 (21.7%)</p></td>
</tr>
</tbody>
</table>
<p>Para medir el miedo a manifestantes y Carabineros, se escogieron variables que preguntan directamente por estos actores. ¿En qué medida le generan miedo los siguientes actores y situaciones referidos a las protestas iniciadas a mediados de Octubre? 1. Los manifestantes violentos en las protestas. 2. El accionar de las fuerzas de seguridad pública en las manifestaciones. Las categorías de respuesta corresponden a una escala Likert de cinco categorías de respuestas.</p>
<p>Como variables de control se eligieron cuatro variables sociodemográficas: sexo, edad, nivel educativo y pertenencia a grupo indígena. El nivel educacional de los entrevistados fue recodificado de 9 a 5 categorías de respuesta, siguiendo la codificación CINE 2011 (UNESCO, 2013). La tabla 3 muestra los valores y frecuencias para las variables de control mencionadas.</p>
<p><strong>Tabla 3: Variables de control</strong></p>
<table class="caption-top table">
<colgroup>
<col style="width: 13%">
<col style="width: 29%">
<col style="width: 35%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Concepto</th>
<th>Indicador</th>
<th>Valores / Frecuencias</th>
<th>Frecuencias (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sexo</td>
<td>Sexo</td>
<td><ol type="1">
<li>Hombre</li>
<li>Mujer</li>
</ol></td>
<td><p>1: 302 (36.8%)</p>
<p>2: 518 (63.2%)</p></td>
</tr>
<tr class="even">
<td></td>
<td>Edad</td>
<td><p>Media (DE): 49.4 (15.5)</p>
<p>min ≤ med ≤ max:</p>
<p>21 ≤ 50 ≤ 83</p>
<p>IQR (CV): 26 (0.3)</p></td>
<td><p>1 : 98 (12.0 %)</p>
<p>2 : 82 (10.0%)</p>
<p>3 : 354 (43.2%)</p>
<p>4 : 130 (15.9%)</p>
<p>5 : 156 (19.0%)</p></td>
</tr>
<tr class="odd">
<td></td>
<td>Pertenencia a grupo indígena</td>
<td><p>0. No pertenece a grupo indígena</p>
<p>1. Pertenence a grupo indígena</p></td>
<td><p>0 : 744 ( 91.0% )</p>
<p>1 : 74 ( 9.0% )</p></td>
</tr>
</tbody>
</table>
</section>
<section id="método" class="level3">
<h3 class="anchored" data-anchor-id="método">5.3 Método</h3>
<p>En concordancia con los objetivos de esta investigación y las hipótesis planteadas, se utilizarán dos tipos de análisis. En primer lugar, estadísticos descriptivos univariados y bivariados para explorar la distribución de las variables seleccionadas, así como correlaciones para observar las relaciones entre estas variables. Finalmente, debido a la naturaleza categórica de las variables dependientes e independientes, se utilizarán una serie de modelos de regresión logística ordinal con efectos de interacción, denominado por Agresti (2018), como cumulative link models. La ventaja de estos modelos, es que se aproximan a los modelos lineales, al mismo tiempo que nos permiten tratar la variable dependiente como propiamente categórica (Christensen, 2011).</p>
<p>El modelo extiende la lógica de una regresión logística convencional, al utilizar el logaritmo natural de las probabilidades acumuladas del resultado binario (≤𝑗,&gt;𝑗) (Agresti, 2018, p.&nbsp;301).</p>
<p>𝑙𝑜𝑔𝑖𝑡[𝑃(𝑦 ≤𝑘⃓ 𝑥)]=𝑙𝑜𝑔𝑃(𝑌 ≤𝑘⃓ 𝑥) 1− 𝑃(𝑌 ≤𝑘⃓ 𝑥) = 𝛼𝑘−(𝛽1𝑥1+𝛽2𝑥2… 𝛽𝑛𝑥𝑛)</p>
<p>El modelo estima simultáneamente k-1 ecuaciones, siendo k el número de categorías de respuestas de la variable dependiente. Cada ecuación tiene su propio intercepto 𝛼𝑘, pero comparten la pendiente 𝛽𝑛 para cada todas las ecuaciones, al asumir que los efectos de las variables independientes (𝛽𝑛), se mantiene proporcional para todos los valores de la variable dependiente. Esta suposición, a corroborar más adelante, se denomina supuesto de proporcionalidad o líneas paralelas.</p>
<p>Para cada variable dependiente se especifican cinco modelos en una escala de complejidad creciente. El primero incluye únicamente la orientación política. El segundo añade el miedo, mientras que el tercero incorpora las variables de control. El cuarto modelo corresponde a la interacción entre miedo y orientación política, y finalmente, el quinto modelo suma a esta interacción las variables sociodemográficas de control.</p>
<ol type="1">
<li><p>𝛼𝑘− 𝛽1 𝑜𝑟𝑖𝑒𝑛𝑡𝑎𝑐𝑖ó𝑛 𝑝𝑜𝑙í𝑡𝑖𝑐𝑎</p></li>
<li><p>𝛼𝑘− (𝛽1 𝑜𝑟𝑖𝑒𝑛𝑡𝑎𝑐𝑖ó𝑛 𝑝𝑜𝑙í𝑡𝑖𝑐𝑎 + 𝛽2 𝑚𝑖𝑒𝑑𝑜)</p></li>
<li><p>𝛼𝑘− (𝛽1 𝑜𝑟𝑖𝑒𝑛𝑡𝑎𝑐𝑖ó𝑛 𝑝𝑜𝑙í𝑡𝑖𝑐𝑎 + 𝛽2 𝑚𝑖𝑒𝑑𝑜+ 𝛽𝑠𝑒𝑥𝑜+ 𝛽𝑒𝑑𝑎𝑑+ 𝛽𝑛𝑖𝑣𝑒𝑙 𝑒𝑑𝑢𝑐𝑎𝑡𝑖𝑣𝑜+𝛽𝑔𝑟𝑢𝑝𝑜 𝑖𝑛𝑑í𝑔𝑒𝑛𝑎 )</p></li>
<li><p>𝛼𝑘−(𝛽1 𝑜𝑟𝑖𝑒𝑛𝑡𝑎𝑐𝑖ó𝑛 𝑝𝑜𝑙í𝑡𝑖𝑐𝑎∗ 𝛽2 𝑚𝑖𝑒𝑑𝑜)</p></li>
<li><p>𝛼𝑘−(𝛽1 𝑜𝑟𝑖𝑒𝑛𝑡𝑎𝑐𝑖ó𝑛 𝑝𝑜𝑙í𝑡𝑖𝑐𝑎∗𝛽2 𝑚𝑖𝑒𝑑𝑜+ 𝛽𝑠𝑒𝑥𝑜+ 𝛽𝑒𝑑𝑎𝑑+ 𝛽𝑛𝑖𝑣𝑒𝑙 𝑒𝑑𝑢𝑐𝑎𝑡𝑖𝑣𝑜+𝛽𝑔𝑟𝑢𝑝𝑜 𝑖𝑛𝑑í𝑔𝑒𝑛𝑎 )</p></li>
</ol>
</section>
</section>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>